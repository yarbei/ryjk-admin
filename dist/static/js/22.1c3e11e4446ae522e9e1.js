webpackJsonp([22],{Luci:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),o=s("Dd8w"),n=s.n(o),r=s("NYxO"),l={name:"login",data:function(){return{username:"",password:"",selectStr:"",roleType:"",isLoging:!1,author:window.APP_INFO.author,version:window.APP_INFO.version,appName:window.APP_INFO.appName,options:[{value:2,label:"疾病管理师 "},{value:3,label:"医生"}]}},methods:n()({},Object(r.b)(["login"]),{userLogin:function(){var e=this;return this.username&&this.password?""==e.roleType?this.$message.error("未选择医院"):(e.isLoging=!0,void e.$http.get("/api/user/login?userAccount="+e.username+"&password="+e.password+"&roleType="+e.roleType).then(function(t){t.data?(e.$message.success("登录成功"),sessionStorage.setItem("loginUser",i()(t.data)),e.$store.commit("SET_LOGIN_USER",t.data),e.$store.commit("SET_LOGIN_TOKEN","4eea90fd-2752-481d-ae67-c75f8641a94a"),e.isLoging=!1,e.$router.push({name:"home"})):(e.$message({message:"登录失败！",type:"error"}),e.isLoging=!1)}).catch(function(e){console.log(e)})):this.$message.error("用户名和密码不能为空")}}),created:function(){sessionStorage.removeItem("loginUser"),sessionStorage.removeItem("token"),this.$store.commit("SET_LOGIN_USER",null)}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fullscreen"},[s("div",{staticClass:"login-box"},[s("form",{staticClass:"login-form",attrs:{action:""}},[e._m(0),e._v(" "),s("div",{staticClass:"m-list-group"},[s("div",{staticClass:"m-list-group-item m-list-group-select",staticStyle:{padding:"0 !important"}},[s("el-select",{attrs:{size:"medium",placeholder:"选择角色"},model:{value:e.roleType,callback:function(t){e.roleType=t},expression:"roleType"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),s("div",{staticClass:"m-list-group-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"m-input",attrs:{type:"text",placeholder:"请输入账户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"m-list-group-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"m-input",attrs:{type:"password",placeholder:"请输入账户密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("button",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoging,expression:"isLoging"}],staticClass:"m-btn sub select-none",on:{click:function(t){return t.preventDefault(),e.userLogin(t)}}},[e._v("登录")])]),e._v(" "),s("div",{staticStyle:{"margin-top":"50px"}}),e._v(" "),s("p",{staticClass:"text-tips"},[s("span",{staticClass:"footer-text"},[e._v("\n        "+e._s(e.appName)+"  \n        "),s("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.version))])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loginImg",staticStyle:{"text-align":"center"}},[t("img",{staticClass:"logo",attrs:{src:s("7Otq"),alt:""}})])}]};var u=s("VU/8")(l,c,!1,function(e){s("M4av")},"data-v-52993fd3",null);t.default=u.exports},M4av:function(e,t){}});